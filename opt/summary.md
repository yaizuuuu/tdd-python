# 各章の要約

## 25章

### 独立したテスト

テストは独立している状態に保つべきである。
そのメリットは以下の様なものがある。

* テストを独立させるためにメソッドなどを小さく分割することによって、準備が簡単になりテスト実行の速度上がる
* 独立したテストを心がけると、凝集度が高く、結合度の低い小さなオブジェクトをたくさんつくるようになるため、良い設計になる

### TODOリスト

TODOリストを充実させるプロセスは以下のような手順になる。

1. 実装しなければならない振る舞いを考えられるだけ書き出してみる
2. 空実装をリストに加える
3. リファクタリングをしなければならない箇所をすべて書き出しておく

### テストファースト

実装を終えてしまったら、きっとテストはあとからは書かれない。

### アサートファースト

アサートを最初に書くことによって以下を最初に考える流れになる。

* 正しい結果とは何か
* それをどう検証するのか

## 26章

### 回帰テスト

不具合が報告されたとき、不具合を再現させる最小のテストケースを書き、失敗を確認する。
それが回帰テストである。
回帰テストは本来コードを書いたときに同時に書かれるものなので、書くべきだったことにどうやったら気づけたのか振り返ら泣けばならない。

### 休憩

何を書くべきか明確に分かっているときは明白な実装を行う。
分からないときは仮実装を行う。
まだ正しい実装が見えてこない場合は三角測量を行う。
それでも分からないときは休憩に行く。

### やり直す

手詰まりになって、途方に暮れてしまったときは、コードを捨ててやり直す。
どんどん進めてしまうとその分だけ無駄になる可能性がある。

## 27章

### 小さいテスト

あまりにも大きくなってしまったテストが失敗したときは、大きいテストから問題箇所を絞り込んだ小さいテストを書く。
レッド・グリーン・リファクタリングのリズムの生命線を死守する。

### Mock Object パターン

構築処理や準備に手間がかかるオブジェクトにはモックを使う。
極力本物のデータベースは使わない。
モックを使うとコードの結合度を低く抑えることに繋がる。

### Crash Test Dummy パターン

例外をテストするパターン。
サンプルのコードはファイルシステムが限界容量まで達しているときにアプリケーションに何が起きるかをテストしている。

```java
private class FullFile extends File {
    public FullFile(String path) {
        super(path);
    }
    
    public boolean createNewFile() throws IOException {
        throw new IOException();
    }
}

```

## 29章

### アサーション

テストは具体的に書く。

×：`asserTrue(rectangle.area() != 0)`

◯：`assertEquals(rectangle.area(), 50)`

オブジェクトの変数までテストしたくなるときは、設計を改善する機会である。

